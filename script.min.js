document.addEventListener('DOMContentLoaded',()=>{console.log("MSC Initiative website loaded successfully!");initializeBasicFeatures();initMSCRunningStopwatch();if('serviceWorker' in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').then((registration)=>{console.log('Service Worker registered successfully:',registration.scope)}).catch((error)=>{console.log('Service Worker registration failed:',error)})})}});function initializeBasicFeatures(){console.log("Basic features initialized")}
function zonedUKToUtc({year,month,day,hour=0,minute=0,second=0}){const timeZone='Europe/London';const localAsUTC=Date.UTC(year,month-1,day,hour,minute,second);const dtf=new Intl.DateTimeFormat('en-GB',{timeZone,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:!1});const parts=dtf.formatToParts(new Date(localAsUTC));const map={};for(const p of parts)map[p.type]=p.value;const asUTCFromZoned=Date.UTC(Number(map.year),Number(map.month)-1,Number(map.day),Number(map.hour),Number(map.minute),Number(map.second));const offset=asUTCFromZoned-localAsUTC;return localAsUTC-offset}
function initMSCRunningStopwatch(){const root=document.getElementById('mscStopwatch');if(!root)return;const START_UK={year:2024,month:9,day:23,hour:17,minute:3,second:37};const startMs=zonedUKToUtc(START_UK);const daysEl=root.querySelector('.value[data-unit="days"]');const hoursEl=root.querySelector('.value[data-unit="hours"]');const minsEl=root.querySelector('.value[data-unit="minutes"]');const secsEl=root.querySelector('.value[data-unit="seconds"]');const pad2=(n)=>String(n).padStart(2,'0');function update(){const nowMs=Date.now();let diffSec=Math.floor((nowMs-startMs)/1000);if(diffSec<0){diffSec=0}
const elapsedDays=Math.floor(diffSec/86400);const rem=diffSec%86400;const hours=Math.floor(rem/3600);const rem2=rem-hours*3600;const minutes=Math.floor(rem2/60);const seconds=rem2-minutes*60;if(daysEl)daysEl.textContent=String(elapsedDays);if(hoursEl)hoursEl.textContent=pad2(hours);if(minsEl)minsEl.textContent=pad2(minutes);if(secsEl)secsEl.textContent=pad2(seconds);}
update();setInterval(update,1000)}
