<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload to Nexus | MSC Nexus</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="page-header">
    <div class="container">
      <h1 class="page-title">Upload to Nexus</h1>
      <p class="page-subtitle">Share resources with your MSC team</p>
      <p class="meta-text">Maximum file size: 5GB</p>
      <div class="cta-group">
        <a class="text-link" href="./files.html">View Files</a>
        <a class="text-link" href="./index.html">Back to Nexus</a>
      </div>
    </div>
  </header>

  <main class="container section">
    <section class="card">
      <form class="upload-form" onsubmit="event.preventDefault();">
        <div class="dropzone" id="dropzone">
          <p class="dropzone-title">Drag & drop files here</p>
          <p class="dropzone-subtitle">or</p>
          <label class="btn btn-secondary" for="file-input">Browse files</label>
          <input id="file-input" type="file" multiple hidden>
        </div>

        <div class="form-row">
          <label class="form-label" for="visibility">Visibility</label>
          <div class="form-control">
            <label class="radio">
              <input type="radio" name="visibility" value="team" checked>
              <span>Team only</span>
            </label>
            <label class="radio">
              <input type="radio" name="visibility" value="teachers">
              <span>Teachers only</span>
            </label>
          </div>
        </div>

        <div class="progress">
          <div class="progress-bar" id="progress-bar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Upload</button>
        </div>
      </form>
    </section>
  </main>

  <script>
    (function() {
      const dropzone = document.getElementById('dropzone');
      const fileInput = document.getElementById('file-input');
      const progressBar = document.getElementById('progress-bar');

      dropzone.addEventListener('click', () => fileInput.click());

      ['dragenter','dragover','dragleave','drop'].forEach(evt => {
        dropzone.addEventListener(evt, e => e.preventDefault());
        dropzone.addEventListener(evt, e => e.stopPropagation());
      });

      ['dragenter','dragover'].forEach(evt => {
        dropzone.addEventListener(evt, () => dropzone.classList.add('is-dragover'));
      });

      ['dragleave','drop'].forEach(evt => {
        dropzone.addEventListener(evt, () => dropzone.classList.remove('is-dragover'));
      });

      dropzone.addEventListener('drop', (e) => {
        fileInput.files = e.dataTransfer.files;
        simulateProgress();
      });

      fileInput.addEventListener('change', simulateProgress);

      function simulateProgress() {
        progressBar.style.width = '0%';
        progressBar.setAttribute('aria-valuenow', 0);
        let pct = 0;
        const interval = setInterval(() => {
          pct += 10;
          progressBar.style.width = pct + '%';
          progressBar.setAttribute('aria-valuenow', pct);
          if (pct >= 100) clearInterval(interval);
        }, 80);
      }
    })();
  </script>
</body>
</html>
