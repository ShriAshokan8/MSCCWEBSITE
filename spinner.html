<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cultural Probability Games!</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #f8ffae 0%, #43c6ac 100%);
      margin: 0;
      padding: 0;
    }
    .container {
      margin: 2em auto;
      background: white;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      max-width: 480px;
      padding: 2em 1.5em;
    }
    h1 {
      color: #f67280;
      font-size: 2em;
      margin-bottom: 0.5em;
    }
    .topic {
      color: #355c7d;
      font-size: 1.2em;
      margin-bottom: 1em;
    }
    .desc {
      color: #333;
      font-size: 1em;
      margin-bottom: 1.5em;
    }

    .spinner-wrapper {
      position: relative;
      width: 220px;
      height: 220px;
      margin: 0 auto 1.5em;
    }
    .spinner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 10px solid #43c6ac;
      border-top: 10px solid #f67280;
      border-right: 10px solid #ffd452;
      border-bottom: 10px solid #355c7d;
      border-left: 10px solid #a8e063;
      position: absolute;
      top: 0; left: 0;
      box-sizing: border-box;
      transition: box-shadow 0.3s;
      box-shadow: 0 0 0 rgba(0,0,0,0.10);
    }
    .spinner.spin {
      animation: spin 2.2s cubic-bezier(0.23, 1, 0.32, 1);
      box-shadow: 0 0 32px 4px #43c6ac33;
    }
    @keyframes spin {
      0%   { transform: rotate(0deg);}
      80%  { transform: rotate(2160deg);} /* 6 full turns */
      100% { transform: rotate(var(--final-angle, 0deg));}
    }
    .pointer {
      position: absolute;
      top: -18px; left: 50%;
      transform: translateX(-50%);
      width: 0; height: 0;
      border-left: 18px solid transparent;
      border-right: 18px solid transparent;
      border-bottom: 32px solid #f67280;
      z-index: 2;
      filter: drop-shadow(0 6px 4px #0002);
      animation: bounce 1.2s infinite alternate;
    }
    @keyframes bounce {
      0% { transform: translateX(-50%) scaleY(1);}
      100% { transform: translateX(-50%) scaleY(1.08);}
    }
    .spinner-label {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%,-50%);
      font-size: 2.2em;
      font-weight: bold;
      color: #355c7d;
      user-select: none;
      text-shadow: 0 2px 8px #fff9;
      min-width: 80px;
    }

    .controls {
      margin-bottom: 1.5em;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.7em;
    }
    .controls label {
      font-weight: bold;
      color: #355c7d;
      font-size: 1em;
    }
    .range-group {
      display: flex;
      align-items: center;
      gap: 0.5em;
      width: 100%;
      max-width: 320px;
      justify-content: center;
    }
    input[type="range"] {
      flex: 1;
      width: 180px;
      accent-color: #43c6ac;
      height: 6px;
    }
    input[type="number"] {
      width: 80px;
      font-size: 1em;
      padding: 0.3em;
      border-radius: 6px;
      border: 1px solid #ccc;
      text-align: right;
    }
    .controls button {
      font-size: 1.12em;
      padding: 0.6em 1.4em;
      border-radius: 8px;
      border: none;
      background: linear-gradient(90deg, #43c6ac, #ffd452);
      color: #355c7d;
      font-weight: bold;
      letter-spacing: 1px;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
      margin-top: 8px;
      box-shadow: 0 2px 10px #355c7d18;
    }
    .controls button:hover {
      background: linear-gradient(90deg, #f67280, #43c6ac);
      color: #fff;
    }
    .result-text {
      margin-top: 1.5em;
      font-size: 1.5em;
      color: #43c6ac;
      font-weight: bold;
      min-height: 2.1em;
    }
    @media (max-width: 500px) {
      .container {
        max-width: 98vw;
        padding: 1em 0.4em;
      }
      .spinner-wrapper {
        width: 98vw;
        max-width: 96vw;
        height: 40vw;
        max-height: 180px;
      }
    }

  </style>
</head>
<body>
  <div class="container">
    <h1>Cultural Probability Games!</h1>
    <div class="topic">Topic: Let's make probability fun with cultural scenarios!</div>
    <div class="desc">
      How it works: We'll use a virtual spinner/dice (described on screen).<br>
      You'll calculate probabilities and predict outcomes.
    </div>
    <div class="spinner-wrapper">
      <div class="pointer"></div>
      <div class="spinner" id="spinner"></div>
      <div class="spinner-label" id="spinnerLabel">?</div>
    </div>
    <div class="controls">
      <label for="maxValue">Select maximum number for the spinner (1 to 10,000):</label>
      <div class="range-group">
        <input type="range" id="maxSlider" min="1" max="10000" value="6" step="1">
        <input type="number" id="maxValue" min="1" max="10000" value="6">
      </div>
      <button id="spinBtn">Spin!</button>
    </div>
    <div class="result-text" id="result"></div>
  </div>
  <script>
    // Elements
    const maxSlider = document.getElementById('maxSlider');
    const maxValueInput = document.getElementById('maxValue');
    const spinBtn = document.getElementById('spinBtn');
    const spinner = document.getElementById('spinner');
    const spinnerLabel = document.getElementById('spinnerLabel');
    const resultText = document.getElementById('result');

    // Sync slider and input
    function syncFromSlider() {
      maxValueInput.value = maxSlider.value;
    }
    function syncFromInput() {
      let val = parseInt(maxValueInput.value, 10) || 1;
      if (val < 1) val = 1;
      if (val > 10000) val = 10000;
      maxValueInput.value = val;
      maxSlider.value = val;
    }
    maxSlider.addEventListener('input', syncFromSlider);
    maxValueInput.addEventListener('input', syncFromInput);

    // Spinner animation logic
    let spinning = false;
    spinBtn.addEventListener('click', function() {
      if (spinning) return;
      let max = parseInt(maxValueInput.value, 10);
      if (isNaN(max) || max < 1) {
        resultText.textContent = "Please enter a number between 1 and 10,000!";
        return;
      }
      if (max > 10000) max = 10000;
      // Randomly select a result
      const result = Math.floor(Math.random() * max) + 1;

      // Calculate angle per number (for fancy pointer effect)
      const anglePer = 360 / max;
      const offset = Math.random() * anglePer; // for variety
      const finalAngle = 360 * 6 + ((result - 1) * anglePer) + offset; // 6 full turns then land

      // Animate spinner
      spinner.style.setProperty('--final-angle', `${finalAngle}deg`);
      spinner.classList.remove('spin');
      void spinner.offsetWidth; // trigger reflow to restart animation
      spinning = true;
      spinnerLabel.textContent = '?';
      resultText.textContent = "Spinning...";

      setTimeout(() => {
        spinner.classList.add('spin');
      }, 25);

      // After animation, show result
      setTimeout(() => {
        spinner.classList.remove('spin');
        spinner.style.transform = `rotate(${(finalAngle % 360)}deg)`;
        spinnerLabel.textContent = result;
        resultText.textContent = `Result: ${result}`;
        spinning = false;
      }, 2200);
    });

    // Allow pressing Enter to spin
    maxValueInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') spinBtn.click();
    });

    // Initialize (keep input and slider in sync)
    syncFromSlider();
  </script>
</body>
</html>
