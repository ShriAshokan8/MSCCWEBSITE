const CACHE_NAME="stem-crafts-club-v1",OFFLINE_URL="/offline.html",STATIC_ASSETS=["/index.html","/about.html","/events.html","/contact.html","/newsletters.html","/style.css","/script.js","/js/main.js","/favicon.ico","/manifest.json",OFFLINE_URL];self.addEventListener("install",e=>{console.log("[Service Worker] Installing..."),e.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("[Service Worker] Caching static assets"),e.addAll(STATIC_ASSETS))).then(()=>self.skipWaiting()).catch(e=>{console.error("[Service Worker] Cache failed:",e)}))}),self.addEventListener("activate",e=>{console.log("[Service Worker] Activating..."),e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE_NAME).map(e=>(console.log("[Service Worker] Deleting old cache:",e),caches.delete(e))))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{e.request.url.startsWith(self.location.origin)&&"GET"===e.request.method&&e.respondWith(caches.match(e.request).then(t=>t?(console.log("[Service Worker] Serving from cache:",e.request.url),t):fetch(e.request).then(t=>{if(!t||200!==t.status||"basic"!==t.type)return t;const s=t.clone();return caches.open(CACHE_NAME).then(t=>{e.request.url.match(/\.(html|css|js|png|jpg|jpeg|svg|gif|webp|avif|ico)$/)&&t.put(e.request,s)}),t}).catch(()=>"navigate"===e.request.mode?caches.match(OFFLINE_URL):new Response("Offline",{status:503,statusText:"Service Unavailable",headers:new Headers({"Content-Type":"text/plain"})}))))});